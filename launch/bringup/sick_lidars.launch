<?xml version="1.0"?>
<launch>
    <arg name="front_lidar_ip"        default="192.168.1.4" />
    <arg name="back_lidar_ip"         default="192.168.1.3" />
    <arg name="robot_name"            default="$(env ROBOT_NAME)" />
    <arg name="base_frame"            default="base_link" />
    <arg name="output"                default="screen" />
    <arg name="pub_joints"            default="true" />

    <group if="$(arg pub_joints)">
        <!-- Robot Description -->
        <param name="use_gui" value="false" />
        <param name="robot_description" command="$(find xacro)/xacro '$(find camel_urdf)/urdf/CAMEL-1000.urdf.xacro'  robot_model:=$(arg robot_name)
        base_frame:=$(arg base_frame)"/>

        <!-- Joint State -->
        <node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher" respawn="true" output="$(arg output)"/>
        <!-- Robot State  -->
        <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" respawn="true" output="$(arg output)"/>
    </group>

    <!-- <node name="sick_lms" pkg="sick_scan" type="sick_generic_caller" respawn="false" output="$(arg output)" ns="front_lidar" required='true'>
        <param name="intensity" type="bool" value="False"/>
        <param name="intensity_resolution_16bit" type="bool" value="false"/>
        <param name="min_ang" type="double" value="-2.35619"/>
        <param name="max_ang" type="double" value="2.35619"/>
        <param name="frame_id" type="string" value="$(arg robot_name)/front_lidar"/>
        <param name="use_binary_protocol" type="bool" value="true"/>
        <param name="scanner_type" type="string" value="sick_lms_1xx"/>
        <param name="range_max" type="double" value="25.0"/>
        <param name="hostname" type="string" value="$(arg front_lidar_ip)"/>
        <param name="port" type="string" value="2112"/>
        <param name="timelimit" type="int" value="5"/>
        <param name="start_services" type="bool" value="false"/>
        <param name="activate_lferec" type="bool" value="false"/>
        <param name="activate_lidoutputstate" type="bool" value="false"/> 
        <param name="activate_lidinputstate" type="bool" value="false"/> 
        <param name="min_intensity" type="double" value="0.0"/> 

        
    </node> -->

    <!-- Back Lidar -->
    <node name="sick_lms" pkg="sick_scan" type="sick_generic_caller" respawn="false" output="$(arg output)" ns="back_lidar" required='true'>
        <param name="intensity" type="bool" value="False"/>
        <param name="intensity_resolution_16bit" type="bool" value="false"/>
        <param name="min_ang" type="double" value="-2.35619"/>
        <param name="max_ang" type="double" value="2.35619"/>
        <param name="frame_id" type="string" value="$(arg robot_name)/back_lidar"/>
        <param name="use_binary_protocol" type="bool" value="true"/>
        <param name="scanner_type" type="string" value="sick_lms_1xx"/>
        <param name="range_max" type="double" value="25.0"/>
        <param name="hostname" type="string" value="$(arg back_lidar_ip)"/>
        <param name="port" type="string" value="2112"/>
        <param name="timelimit" type="int" value="5"/>
        <param name="start_services" type="bool" value="false"/>
        <param name="activate_lferec" type="bool" value="false"/>
        <param name="activate_lidoutputstate" type="bool" value="false"/> 
        <param name="activate_lidinputstate" type="bool" value="false"/> 
        <param name="min_intensity" type="double" value="0.0"/>
        <param name="ang_res" type="double" value="0.25"  />
        <param name="scan_freq" type="double" value="25" /> 
    </node>

    <!-- Two lidars merger -->
    <!-- <node pkg="ira_laser_tools" name="scan_merger" type="laserscan_multi_merger" output="$(arg output)">
        <param name="destination_frame" value="$(arg robot_name)/laser"/>
        <param name="cloud_destination_topic" value="/$(arg robot_name)/merged_cloud"/>
        <param name="scan_destination_topic" value="/$(arg robot_name)/scan"/>
        <param name="laserscan_topics" value ="/$(arg robot_name)/front_lidar/scan /$(arg robot_name)/back_lidar/scan" /> 
        <param name="angle_min" value="-3.14159265359"/>
        <param name="angle_max" value="3.14159265359"/>
        <param name="angle_increment" value="0.004363323096185923"/>
        <param name="scan_time" value="0.03999999910593033"/>
        <param name="range_min" value="0.05"/>
        <param name="range_max" value="20.0"/>
    </node> -->

</launch>